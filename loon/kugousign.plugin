#!name = é…·ç‹—æ¦‚å¿µç‰ˆç­¾åˆ°
#!desc = âœ…ç­¾åˆ°æ’ä»¶
#!author = ğŸ…œâ“˜ğŸ…šâ“”ğŸ…Ÿâ“—ğŸ…˜â“”
#!icon = https://raw.githubusercontent.com/Mikephie/icons/main/icon/kugou.png

[Argument]
appName = input,"é…·ç‹—æ¯æ—¥VIP",tag=appçš„åå­—,desc=å¡«å†™appçš„ç”¨æˆ·åï¼Œç”¨äºæäº¤appçš„ç›¸å…³ä¿¡æ¯
appCategory = select,"âœ…ç­¾åˆ°","ğŸš«å¹¿å‘Š","ğŸ”APP","ğŸ› ï¸å·¥å…·",tag=appçš„åˆ†ç±»
isSupportChinese = switch,true,tag=æ˜¯å¦æ”¯æŒä¸­æ–‡,desc=é€‰æ‹©appæ˜¯å¦æ”¯æŒä¸­æ–‡
cron = input,"30 6 * * *",tag=å®šæ—¶ä»»åŠ¡æ—¶é—´,desc=å®šæ—¶ä»»åŠ¡çš„cronè¡¨è¾¾å¼
cookieScriptEnable = switch,true,tag=æ˜¯å¦å¯ç”¨è·å–cookieçš„è„šæœ¬

[Rule]
URL-REGEX,https://gateway.kugou.com/ads.gateway/.*,REJECT
URL-REGEX,https://gateway3.kugou.com/ads.gateway/.*,REJECT
URL-REGEX,https://gatewayretry.kugou.com/ads.gateway/.*,REJECT
URL-REGEX,https://gateway.kugou.com/youth/api/user/v1/init.*,REJECT
URL-REGEX,^http:\/\/mobilelog\.kugou\.com\/adtrackconfig\.json$,REJECT
URL-REGEX,https://tmeadcomm.y.qq.com/maproxy/getPbCompressAd,REJECT
DOMAIN-SUFFIX,adservice.kugou.com,REJECT
DOMAIN-SUFFIX,install2.kugou.com,REJECT
DOMAIN-SUFFIX,adstats.tencentmusic.com,REJECT
DOMAIN-SUFFIX,tmead.y.qq.com,REJECT
DOMAIN-SUFFIX,ad.tencentmusic.com,REJECT
DOMAIN-SUFFIX,api-adservices.apple.com,REJECT
DOMAIN-SUFFIX,us.l.qq.com,REJECT
DOMAIN-SUFFIX,p.l.qq.com,REJECT
DOMAIN-SUFFIX,mc.tencentmusic.com,REJECT
DOMAIN-SUFFIX,mdt.qq.com,REJECT
DOMAIN-SUFFIX,gdt.qq.com,REJECT
DOMAIN-SUFFIX,e.qq.com,REJECT

[Script]
http-request ^https://gateway.kugou.com/youth/v1/(recharge/receive_vip_listen_song|activity/get_month_vip_record).* script-path=https://raw.githubusercontent.com/Mikephie/Task/main/kugou.js, tag = tag=é…·ç‹—æ¦‚å¿µç‰ˆCookies, argument=[{appName},{appCategory},{isSupportChinese}],enable = {cookieScriptEnable}

cron {cron} script-path=https://raw.githubusercontent.com/Mikephie/Task/main/kugou_auto.js,tag = é…·ç‹—æ¦‚å¿µç‰ˆç­¾åˆ°,enable=true

[MITM]
hostname = *.kugou.com