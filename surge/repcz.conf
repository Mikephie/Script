# 基于[@GetSomeCats](https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/A_mini.conf)修改
# 参考https://github.com/getsomecat/GetSomeCats/blob/Surge/SurgePro.conf
# Author:https://github.com/Repcz
# TG:https://t.me/QVQ_Channel
#
# Surge Version ≥ 5.11.0，需解锁 Smart 策略组
#
# 以 ';' 或 '#' 或 '//' 开头的配置文件行为注释行
#
# 最后更新时间: 2024-05-09 18:20
#
# ================

[General]
# 日志级别
loglevel = notify
#设置 skip-proxy
skip-proxy = 127.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 162.14.0.0/16, 211.99.96.0/19, 162.159.192.0/24, 162.159.193.0/24, 162.159.195.0/24, fc00::/7, fe80::/10, localhost, *.local, captive.apple.com, passenger.t3go.cn, *.ccb.com, wxh.wo.cn, *.abcchina.com, *.abcchina.com.cn

#always-real-ip
https://ruleset.skk.moe/Modules/sukka_common_always_realip.sgmodule

#exclude-simple-hostnames
exclude-simple-hostnames = true

#hijack-dns
hijack-dns = 8.8.8.8:53, 8.8.4.4:53

#ipv6 / ipv6-vif
ipv6 = false
ipv6-vif = off
#本机 -- IPv4 -> 远端策略 -- IPv6 -> 目标网站

#show-error-page-for-reject
show-error-page-for-reject = true

#read-etc-hosts
read-etc-hosts = true

#internet-test-url / proxy-test-url / proxy-test-udp
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url = http://latency-test.skk.moe/endpoint
proxy-test-udp = www.apple.com@64.6.64.6

#vif-mode
vif-mode = v3

#udp-policy-not-supported-behaviour
udp-policy-not-supported-behaviour = REJECT

#DNS 分流设置
[General]
encrypted-dns-server = quic://223.5.5.5, quic://223.6.6.6, https://1.12.12.12/dns-query, https://120.53.53.53/dns-query


[Proxy Group]
手动选择 = select, no-alert=0, hidden=0, include-all-proxies=1
国外网站 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
国际媒体 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
微软服务 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
谷歌服务 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
AI = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
社交媒体 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
电报消息 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
游戏平台 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, no-alert=0, hidden=0, include-all-proxies=0
Emby = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, DIRECT, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=手动选择
Spotify = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点,  no-alert=0, hidden=0, include-all-proxies=0
兜底分流 = select, 手动选择, 香港节点, 美国节点, 狮城节点, 日本节点, 台湾节点, 欧洲节点, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
香港节点 = smart, update-interval=0, policy-regex-filter=(?i)🇭🇰|香港|(\b(HK|Hong)\b), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0
美国节点 = smart, update-interval=0, policy-regex-filter=(?i)🇺🇸|美国|洛杉矶|圣何塞|(\b(US|United States)\b), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0
狮城节点 = smart, update-interval=0, policy-regex-filter=(?i)🇸🇬|新加坡|狮|(\b(SG|Singapore)\b), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0
日本节点 = smart, update-interval=0, policy-regex-filter=(?i)🇯🇵|日本|东京|(\b(JP|Japan)\b), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0, persistent=0
台湾节点 = smart, update-interval=0, policy-regex-filter=(?i)🇨🇳|🇹🇼|台湾|(\b(TW|Tai|Taiwan)\b), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0
欧洲节点 = smart, update-interval=0, policy-regex-filter=🇬🇧|🇫🇷|🇳🇱|🇮🇸|🇩🇪|🇺🇦|🇨🇭|🇪🇺, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=手动选择, interval=300, tolerance=0

[Rule]
# Direct Fix
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Direct.list,DIRECT
# Reject Ads
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Reject.list,REJECT
# AIGC
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/AI.list,AI
# Telegram
# IP-ASN,59930,美国节点,no-resolve // Telegram DC1
# IP-ASN,44907,欧洲节点,no-resolve // Telegram DC2
# IP-ASN,211157,美国节点,no-resolve // Telegram DC3
# IP-ASN,62041,欧洲节点,no-resolve // Telegram DC4
# IP-ASN,62014,狮城节点,no-resolve // Telegram DC5
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Telegram.list,电报消息
# Social Media
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Twitter.list,社交媒体
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Instagram.list,社交媒体
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/TikTok.list,社交媒体
# Game
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Steam.list,游戏平台
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Epic.list,游戏平台
# Google
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/YouTube.list,谷歌服务
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Google.list,谷歌服务
# Microsoft
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Github.list,微软服务
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/OneDrive.list,微软服务
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Microsoft.list,微软服务
# Streaming
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Emby.list,Emby
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Spotify.list,Spotify
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Bahamut.list,国际媒体
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Netflix.list,国际媒体,extended-matching
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/Disney.list,国际媒体
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/PrimeVideo.list,国际媒体
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/HBO.list,国际媒体
# GFW
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/ProxyGFW.list,国外网站
# Apple Proxy
RULE-SET,https://github.com/Repcz/Tool/raw/X/Surge/Rules/AppleProxy.list,国外网站
# System
RULE-SET,SYSTEM,DIRECT
# Local Aera Network
RULE-SET,LAN,DIRECT
# China
GEOIP,CN,DIRECT
# FInal
FINAL,兜底分流

[MITM]
# MITM over HTTP/2
h2 = true
